<!DOCTYPE HTML>
<html lang="en" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>adrs documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "navy";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">adrs documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/joshrotenberg/adrs/tree/main/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><code>adrs</code> is a command line tool for creating and managing <a href="https://adr.github.io">Architecture Decision Records</a> (ADRs).</p>
<h2 id="what-are-adrs"><a class="header" href="#what-are-adrs">What are ADRs?</a></h2>
<p>Architecture Decision Records are short documents that capture important architectural decisions made during a project. Each ADR describes a single decision, including the context, the decision itself, and its consequences.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li><strong>adr-tools compatible</strong>: Works with existing ADR repositories created by <a href="https://github.com/npryce/adr-tools">adr-tools</a></li>
<li><strong>Multiple formats</strong>: Supports both Nygard (classic) and <a href="https://adr.github.io/madr/">MADR 4.0.0</a> formats</li>
<li><strong>Template variants</strong>: Full, minimal, and bare templates for each format</li>
<li><strong>Cross-platform</strong>: Binaries available for Linux, macOS, and Windows</li>
<li><strong>Library support</strong>: Use <code>adrs-core</code> as a Rust library in your own tools</li>
</ul>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<h3 id="installation"><a class="header" href="#installation">Installation</a></h3>
<p>Using the shell installer (Linux/macOS):</p>
<pre><code class="language-sh">curl --proto '=https' --tlsv1.2 -LsSf https://github.com/joshrotenberg/adrs/releases/latest/download/adrs-installer.sh | sh
</code></pre>
<p>Using PowerShell (Windows):</p>
<pre><code class="language-powershell">powershell -ExecutionPolicy Bypass -c "irm https://github.com/joshrotenberg/adrs/releases/latest/download/adrs-installer.ps1 | iex"
</code></pre>
<p>Using Homebrew:</p>
<pre><code class="language-sh">brew install joshrotenberg/brew/adrs
</code></pre>
<p>Using Cargo:</p>
<pre><code class="language-sh">cargo install adrs
</code></pre>
<h3 id="initialize-a-repository"><a class="header" href="#initialize-a-repository">Initialize a Repository</a></h3>
<pre><code class="language-sh">adrs init
</code></pre>
<p>This creates:</p>
<ul>
<li>A <code>.adr-dir</code> file pointing to <code>doc/adr</code></li>
<li>The <code>doc/adr</code> directory</li>
<li>An initial ADR: <code>0001-record-architecture-decisions.md</code></li>
</ul>
<h3 id="create-a-new-adr"><a class="header" href="#create-a-new-adr">Create a New ADR</a></h3>
<pre><code class="language-sh">adrs new "Use PostgreSQL for persistence"
</code></pre>
<p>This opens your editor with a new ADR from the default template. Save and close to create the record.</p>
<h3 id="list-adrs"><a class="header" href="#list-adrs">List ADRs</a></h3>
<pre><code class="language-sh">adrs list
</code></pre>
<h3 id="link-adrs"><a class="header" href="#link-adrs">Link ADRs</a></h3>
<pre><code class="language-sh">adrs link 2 "Amends" 1 "Amended by"
</code></pre>
<h2 id="migration-from-adr-tools"><a class="header" href="#migration-from-adr-tools">Migration from adr-tools</a></h2>
<p><code>adrs</code> is designed to be a drop-in replacement for adr-tools. Your existing ADR repository will work without changes:</p>
<ol>
<li>Install <code>adrs</code></li>
<li>Run commands as usual - <code>adrs</code> reads the existing <code>.adr-dir</code> file and ADR documents</li>
</ol>
<p>For new features like MADR format or YAML frontmatter, see the <a href="./configuration.html">Configuration</a> chapter.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><a href="./configuration.html">Configuration</a> - Learn about configuration options</li>
<li><a href="./commands/README.html">Commands</a> - Detailed command reference</li>
<li><a href="./templates.html">Templates</a> - Customize ADR templates</li>
<li><a href="./formats.html">Formats</a> - Nygard vs MADR format comparison</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation-1"><a class="header" href="#installation-1">Installation</a></h1>
<h2 id="pre-built-binaries"><a class="header" href="#pre-built-binaries">Pre-built Binaries</a></h2>
<p>Pre-built binaries are available for Linux, macOS, and Windows.</p>
<h3 id="shell-installer-linuxmacos"><a class="header" href="#shell-installer-linuxmacos">Shell Installer (Linux/macOS)</a></h3>
<pre><code class="language-sh">curl --proto '=https' --tlsv1.2 -LsSf https://github.com/joshrotenberg/adrs/releases/latest/download/adrs-installer.sh | sh
</code></pre>
<h3 id="powershell-installer-windows"><a class="header" href="#powershell-installer-windows">PowerShell Installer (Windows)</a></h3>
<pre><code class="language-powershell">powershell -ExecutionPolicy Bypass -c "irm https://github.com/joshrotenberg/adrs/releases/latest/download/adrs-installer.ps1 | iex"
</code></pre>
<h3 id="homebrew-macoslinux"><a class="header" href="#homebrew-macoslinux">Homebrew (macOS/Linux)</a></h3>
<pre><code class="language-sh">brew install joshrotenberg/brew/adrs
</code></pre>
<h3 id="manual-download"><a class="header" href="#manual-download">Manual Download</a></h3>
<p>Download the appropriate binary from the <a href="https://github.com/joshrotenberg/adrs/releases">releases page</a>.</p>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Architecture</th><th>Download</th></tr></thead><tbody>
<tr><td>Linux</td><td>x86_64</td><td><code>adrs-x86_64-unknown-linux-gnu.tar.gz</code></td></tr>
<tr><td>Linux</td><td>aarch64</td><td><code>adrs-aarch64-unknown-linux-gnu.tar.gz</code></td></tr>
<tr><td>macOS</td><td>x86_64 (Intel)</td><td><code>adrs-x86_64-apple-darwin.tar.gz</code></td></tr>
<tr><td>macOS</td><td>aarch64 (Apple Silicon)</td><td><code>adrs-aarch64-apple-darwin.tar.gz</code></td></tr>
<tr><td>Windows</td><td>x86_64</td><td><code>adrs-x86_64-pc-windows-msvc.zip</code></td></tr>
</tbody></table>
</div>
<h2 id="from-source"><a class="header" href="#from-source">From Source</a></h2>
<h3 id="using-cargo"><a class="header" href="#using-cargo">Using Cargo</a></h3>
<pre><code class="language-sh">cargo install adrs
</code></pre>
<h3 id="building-from-git"><a class="header" href="#building-from-git">Building from Git</a></h3>
<pre><code class="language-sh">git clone https://github.com/joshrotenberg/adrs
cd adrs
cargo build --release
</code></pre>
<p>The binary will be at <code>target/release/adrs</code>.</p>
<h2 id="docker"><a class="header" href="#docker">Docker</a></h2>
<p>A Docker image is available for running <code>adrs</code> in containers:</p>
<pre><code class="language-sh">docker pull ghcr.io/joshrotenberg/adrs:latest
</code></pre>
<p>Mount your project directory to use it:</p>
<pre><code class="language-sh">docker run --rm -v $(pwd):/workspace -w /workspace ghcr.io/joshrotenberg/adrs list
</code></pre>
<h2 id="verify-installation"><a class="header" href="#verify-installation">Verify Installation</a></h2>
<pre><code class="language-sh">adrs --version
</code></pre>
<h2 id="shell-completions"><a class="header" href="#shell-completions">Shell Completions</a></h2>
<p>Generate shell completions for your shell:</p>
<pre><code class="language-sh"># Bash
adrs completions bash &gt; ~/.local/share/bash-completion/completions/adrs

# Zsh
adrs completions zsh &gt; ~/.zfunc/_adrs

# Fish
adrs completions fish &gt; ~/.config/fish/completions/adrs.fish

# PowerShell
adrs completions powershell &gt; $PROFILE.CurrentUserAllHosts
</code></pre>
<p>Note: Shell completions require rebuilding after updating <code>adrs</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p><code>adrs</code> supports multiple configuration methods with the following priority (highest to lowest):</p>
<ol>
<li>Command-line flags</li>
<li>Environment variables</li>
<li>Project configuration file (<code>adrs.toml</code> or <code>.adr-dir</code>)</li>
<li>Global configuration file (<code>~/.config/adrs/config.toml</code>)</li>
<li>Default values</li>
</ol>
<h2 id="project-configuration"><a class="header" href="#project-configuration">Project Configuration</a></h2>
<h3 id="legacy-format-adr-dir"><a class="header" href="#legacy-format-adr-dir">Legacy Format (.adr-dir)</a></h3>
<p>For compatibility with adr-tools, <code>adrs</code> reads the <code>.adr-dir</code> file:</p>
<pre><code>doc/adr
</code></pre>
<p>This single-line file specifies the directory where ADRs are stored.</p>
<h3 id="toml-format-adrstoml"><a class="header" href="#toml-format-adrstoml">TOML Format (adrs.toml)</a></h3>
<p>For more options, use <code>adrs.toml</code> in your project root:</p>
<pre><code class="language-toml"># ADR storage directory (relative to project root)
adr_dir = "doc/adr"

# Operation mode: "compatible" or "nextgen"
# - compatible: adr-tools compatible output (default)
# - nextgen: YAML frontmatter with enhanced features
mode = "compatible"

# Template configuration
[templates]
# Default format: "nygard" or "madr"
format = "nygard"

# Default variant: "full", "minimal", or "bare"
variant = "full"

# Path to custom template file (optional)
# custom = "templates/custom.md"
</code></pre>
<h2 id="global-configuration"><a class="header" href="#global-configuration">Global Configuration</a></h2>
<p>Create <code>~/.config/adrs/config.toml</code> for user-wide defaults:</p>
<pre><code class="language-toml"># Default mode for new repositories
mode = "nextgen"

[templates]
format = "madr"
variant = "minimal"
</code></pre>
<p>Project configuration overrides global configuration.</p>
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody>
<tr><td><code>ADR_DIRECTORY</code></td><td>Override the ADR directory path</td></tr>
<tr><td><code>ADRS_CONFIG</code></td><td>Path to a specific configuration file</td></tr>
<tr><td><code>EDITOR</code></td><td>Editor to use for <code>adrs new</code> and <code>adrs edit</code></td></tr>
</tbody></table>
</div>
<p>Example:</p>
<pre><code class="language-sh">export ADR_DIRECTORY="decisions"
adrs new "Use Redis for caching"
</code></pre>
<h2 id="configuration-discovery"><a class="header" href="#configuration-discovery">Configuration Discovery</a></h2>
<p>When you run an <code>adrs</code> command, it searches for configuration by:</p>
<ol>
<li>Looking in the current directory for <code>adrs.toml</code> or <code>.adr-dir</code></li>
<li>Searching parent directories up to the git root (or filesystem root)</li>
<li>Checking the global config at <code>~/.config/adrs/config.toml</code></li>
<li>Using defaults if nothing is found</li>
</ol>
<p>This means you can run <code>adrs</code> commands from any subdirectory of your project.</p>
<h2 id="modes"><a class="header" href="#modes">Modes</a></h2>
<h3 id="compatible-mode-default"><a class="header" href="#compatible-mode-default">Compatible Mode (default)</a></h3>
<p>Produces output identical to adr-tools:</p>
<ul>
<li>Status in the document body</li>
<li>Links as markdown text</li>
<li>No YAML frontmatter</li>
</ul>
<h3 id="nextgen-mode"><a class="header" href="#nextgen-mode">NextGen Mode</a></h3>
<p>Enables enhanced features:</p>
<ul>
<li>YAML frontmatter for metadata</li>
<li>Structured status and links</li>
<li>MADR 4.0.0 fields (decision-makers, consulted, informed)</li>
</ul>
<p>Enable with <code>--ng</code> flag or in configuration:</p>
<pre><code class="language-toml">mode = "nextgen"
</code></pre>
<h2 id="show-current-configuration"><a class="header" href="#show-current-configuration">Show Current Configuration</a></h2>
<pre><code class="language-sh">adrs config
</code></pre>
<p>Output:</p>
<pre><code>Project root: /path/to/project
Config source: adrs.toml
ADR directory: doc/adr
Full path: /path/to/project/doc/adr
Mode: Compatible
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="formats"><a class="header" href="#formats">Formats</a></h1>
<p><code>adrs</code> supports two ADR formats: Nygard (the original adr-tools format) and MADR 4.0.0.</p>
<h2 id="nygard-format"><a class="header" href="#nygard-format">Nygard Format</a></h2>
<p>The classic format from <a href="https://github.com/npryce/adr-tools">adr-tools</a>, based on Michael Nygard's blog post.</p>
<h3 id="structure"><a class="header" href="#structure">Structure</a></h3>
<pre><code class="language-markdown"># 1. Record architecture decisions

Date: 2024-01-15

## Status

Accepted

## Context

We need to record the architectural decisions made on this project.

## Decision

We will use Architecture Decision Records, as described by Michael Nygard.

## Consequences

See Michael Nygard's article for a detailed description.
</code></pre>
<h3 id="sections"><a class="header" href="#sections">Sections</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Section</th><th>Description</th></tr></thead><tbody>
<tr><td>Title</td><td>Number and title as H1 heading</td></tr>
<tr><td>Date</td><td>When the decision was made</td></tr>
<tr><td>Status</td><td>Proposed, Accepted, Deprecated, Superseded</td></tr>
<tr><td>Context</td><td>Why is this decision needed?</td></tr>
<tr><td>Decision</td><td>What was decided?</td></tr>
<tr><td>Consequences</td><td>What are the implications?</td></tr>
</tbody></table>
</div>
<h2 id="madr-400-format"><a class="header" href="#madr-400-format">MADR 4.0.0 Format</a></h2>
<p><a href="https://adr.github.io/madr/">Markdown Architectural Decision Records</a> version 4.0.0 provides a more structured format with additional metadata.</p>
<h3 id="structure-1"><a class="header" href="#structure-1">Structure</a></h3>
<pre><code class="language-markdown">---
status: accepted
date: 2024-01-15
decision-makers:
  - Alice
  - Bob
consulted:
  - Carol
informed:
  - Dave
---

# Use PostgreSQL for Persistence

## Context and Problem Statement

We need a database for storing user data.

## Decision Drivers

* Need ACID compliance
* Team has PostgreSQL experience
* Open source preferred

## Considered Options

* PostgreSQL
* MySQL
* MongoDB

## Decision Outcome

Chosen option: "PostgreSQL", because it meets all requirements and the team is familiar with it.

### Consequences

* Good, because we have team expertise
* Bad, because it requires more infrastructure than SQLite

### Confirmation

We will confirm this decision after the first production deployment.

## Pros and Cons of the Options

### PostgreSQL

* Good, because ACID compliant
* Good, because team experience
* Neutral, because requires server setup

### MySQL

* Good, because widely used
* Bad, because different SQL dialect

### MongoDB

* Good, because flexible schema
* Bad, because not ACID compliant by default
</code></pre>
<h3 id="yaml-frontmatter-fields"><a class="header" href="#yaml-frontmatter-fields">YAML Frontmatter Fields</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td><code>status</code></td><td>Decision status</td></tr>
<tr><td><code>date</code></td><td>Date of the decision</td></tr>
<tr><td><code>decision-makers</code></td><td>List of people who made the decision</td></tr>
<tr><td><code>consulted</code></td><td>List of people whose opinions were sought</td></tr>
<tr><td><code>informed</code></td><td>List of people who were informed of the decision</td></tr>
</tbody></table>
</div>
<h3 id="sections-1"><a class="header" href="#sections-1">Sections</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Section</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td>Title</td><td>Yes</td><td>The decision as an H1 heading</td></tr>
<tr><td>Context and Problem Statement</td><td>Yes</td><td>Why is this decision needed?</td></tr>
<tr><td>Decision Drivers</td><td>No</td><td>Factors influencing the decision</td></tr>
<tr><td>Considered Options</td><td>No</td><td>Options that were evaluated</td></tr>
<tr><td>Decision Outcome</td><td>Yes</td><td>The chosen option and rationale</td></tr>
<tr><td>Consequences</td><td>No</td><td>Good and bad outcomes</td></tr>
<tr><td>Confirmation</td><td>No</td><td>How the decision will be validated</td></tr>
<tr><td>Pros and Cons</td><td>No</td><td>Detailed option comparison</td></tr>
<tr><td>More Information</td><td>No</td><td>Links and references</td></tr>
</tbody></table>
</div>
<h2 id="choosing-a-format"><a class="header" href="#choosing-a-format">Choosing a Format</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Use Nygard when...</th><th>Use MADR when...</th></tr></thead><tbody>
<tr><td>Migrating from adr-tools</td><td>Starting a new project</td></tr>
<tr><td>Simplicity is preferred</td><td>You need structured metadata</td></tr>
<tr><td>Team is familiar with it</td><td>You want decision-maker tracking</td></tr>
<tr><td></td><td>You need detailed option comparison</td></tr>
</tbody></table>
</div>
<h2 id="specifying-format"><a class="header" href="#specifying-format">Specifying Format</a></h2>
<h3 id="per-command"><a class="header" href="#per-command">Per-command</a></h3>
<pre><code class="language-sh">adrs new --format madr "Use PostgreSQL"
adrs new --format nygard "Use PostgreSQL"
</code></pre>
<h3 id="in-configuration"><a class="header" href="#in-configuration">In Configuration</a></h3>
<pre><code class="language-toml">[templates]
format = "madr"
</code></pre>
<h2 id="template-variants"><a class="header" href="#template-variants">Template Variants</a></h2>
<p>Both formats support three variants:</p>
<div class="table-wrapper"><table><thead><tr><th>Variant</th><th>Description</th></tr></thead><tbody>
<tr><td><code>full</code></td><td>All sections with guidance comments</td></tr>
<tr><td><code>minimal</code></td><td>Essential sections only</td></tr>
<tr><td><code>bare</code></td><td>Bare structure, no comments</td></tr>
</tbody></table>
</div>
<pre><code class="language-sh">adrs new --format madr --variant minimal "Use PostgreSQL"
</code></pre>
<p>See <a href="./templates.html">Templates</a> for more details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="templates"><a class="header" href="#templates">Templates</a></h1>
<p><code>adrs</code> uses templates to generate new ADR documents. You can use built-in templates or create custom ones.</p>
<h2 id="built-in-templates"><a class="header" href="#built-in-templates">Built-in Templates</a></h2>
<h3 id="formats-1"><a class="header" href="#formats-1">Formats</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Format</th><th>Description</th></tr></thead><tbody>
<tr><td><code>nygard</code></td><td>Classic adr-tools format (default)</td></tr>
<tr><td><code>madr</code></td><td>MADR 4.0.0 format</td></tr>
</tbody></table>
</div>
<h3 id="variants"><a class="header" href="#variants">Variants</a></h3>
<p>Each format has three variants:</p>
<div class="table-wrapper"><table><thead><tr><th>Variant</th><th>Description</th></tr></thead><tbody>
<tr><td><code>full</code></td><td>Complete template with all sections and guidance comments</td></tr>
<tr><td><code>minimal</code></td><td>Essential sections only, no guidance</td></tr>
<tr><td><code>bare</code></td><td>Minimal structure with placeholders</td></tr>
</tbody></table>
</div>
<h3 id="using-built-in-templates"><a class="header" href="#using-built-in-templates">Using Built-in Templates</a></h3>
<pre><code class="language-sh"># Default: nygard format, full variant
adrs new "My Decision"

# MADR format, full variant
adrs new --format madr "My Decision"

# Nygard format, minimal variant
adrs new --variant minimal "My Decision"

# MADR format, bare variant
adrs new --format madr --variant bare "My Decision"
</code></pre>
<h3 id="template-examples"><a class="header" href="#template-examples">Template Examples</a></h3>
<h4 id="nygard-full"><a class="header" href="#nygard-full">Nygard Full</a></h4>
<pre><code class="language-markdown"># {{ number }}. {{ title }}

Date: {{ date }}

## Status

{{ status }}

## Context

&lt;!-- Describe the issue motivating this decision and any context --&gt;

## Decision

&lt;!-- What is the change that we're proposing and/or doing? --&gt;

## Consequences

&lt;!-- What becomes easier or more difficult to do because of this change? --&gt;
</code></pre>
<h4 id="madr-full"><a class="header" href="#madr-full">MADR Full</a></h4>
<pre><code class="language-markdown">---
status: {{ status | lower }}
date: {{ date }}
---

# {{ title }}

## Context and Problem Statement

&lt;!-- Describe the context and problem statement --&gt;

## Decision Drivers

&lt;!-- List the decision drivers --&gt;

## Considered Options

&lt;!-- List the options considered --&gt;

## Decision Outcome

Chosen option: "", because ...

### Consequences

* Good, because ...
* Bad, because ...
</code></pre>
<h2 id="custom-templates"><a class="header" href="#custom-templates">Custom Templates</a></h2>
<p>Create custom templates using <a href="https://jinja.palletsprojects.com/">Jinja2</a> syntax.</p>
<h3 id="template-variables"><a class="header" href="#template-variables">Template Variables</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><td><code>number</code></td><td>ADR number (padded)</td><td><code>0001</code></td></tr>
<tr><td><code>title</code></td><td>ADR title</td><td><code>Use PostgreSQL</code></td></tr>
<tr><td><code>date</code></td><td>Current date</td><td><code>2024-01-15</code></td></tr>
<tr><td><code>status</code></td><td>Initial status</td><td><code>Proposed</code></td></tr>
<tr><td><code>links</code></td><td>Array of links</td><td>See below</td></tr>
</tbody></table>
</div>
<h3 id="link-variables"><a class="header" href="#link-variables">Link Variables</a></h3>
<p>Each link in the <code>links</code> array has:</p>
<div class="table-wrapper"><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody>
<tr><td><code>link.kind</code></td><td>Link type (e.g., "Supersedes")</td></tr>
<tr><td><code>link.target</code></td><td>Target ADR number</td></tr>
<tr><td><code>link.description</code></td><td>Optional description</td></tr>
</tbody></table>
</div>
<h3 id="creating-a-custom-template"><a class="header" href="#creating-a-custom-template">Creating a Custom Template</a></h3>
<ol>
<li>Create a template file:</li>
</ol>
<pre><code class="language-markdown"># {{ number }}. {{ title }}

**Date**: {{ date }}
**Status**: {{ status }}
**Author**: [Your Name]

## Problem

&lt;!-- What problem does this solve? --&gt;

## Solution

&lt;!-- What is the solution? --&gt;

## Alternatives Considered

&lt;!-- What alternatives were considered? --&gt;

## References

&lt;!-- Any relevant links or documents --&gt;
</code></pre>
<ol start="2">
<li>Use it when creating ADRs:</li>
</ol>
<pre><code class="language-sh">adrs new --template path/to/template.md "My Decision"
</code></pre>
<p>Or configure it in <code>adrs.toml</code>:</p>
<pre><code class="language-toml">[templates]
custom = "templates/my-template.md"
</code></pre>
<h3 id="conditional-sections"><a class="header" href="#conditional-sections">Conditional Sections</a></h3>
<p>Use Jinja2 conditionals for optional content:</p>
<pre><code class="language-markdown">{% if links %}
## Related Decisions

{% for link in links %}
* {{ link.kind }} [ADR {{ link.target }}]({{ link.target | pad(4) }}-*.md)
{% endfor %}
{% endif %}
</code></pre>
<h3 id="filters"><a class="header" href="#filters">Filters</a></h3>
<p>Available filters:</p>
<div class="table-wrapper"><table><thead><tr><th>Filter</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><td><code>lower</code></td><td>Lowercase</td><td><code>{{ status | lower }}</code></td></tr>
<tr><td><code>upper</code></td><td>Uppercase</td><td><code>{{ title | upper }}</code></td></tr>
<tr><td><code>pad(n)</code></td><td>Zero-pad number</td><td><code>{{ number | pad(4) }}</code></td></tr>
</tbody></table>
</div>
<h2 id="default-configuration"><a class="header" href="#default-configuration">Default Configuration</a></h2>
<p>Set defaults in <code>adrs.toml</code>:</p>
<pre><code class="language-toml">[templates]
# Default format for new ADRs
format = "madr"

# Default variant
variant = "minimal"

# Custom template path (optional)
# custom = "templates/custom.md"
</code></pre>
<h2 id="nextgen-mode-templates"><a class="header" href="#nextgen-mode-templates">NextGen Mode Templates</a></h2>
<p>When using <code>--ng</code> flag or <code>mode = "nextgen"</code>, templates generate YAML frontmatter:</p>
<pre><code class="language-markdown">---
status: proposed
date: 2024-01-15
links:
  - kind: Supersedes
    target: 1
---

# Use PostgreSQL for Persistence

...
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commands"><a class="header" href="#commands">Commands</a></h1>
<p><code>adrs</code> provides commands for managing Architecture Decision Records.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="commands/./init.html">init</a></td><td>Initialize a new ADR repository</td></tr>
<tr><td><a href="commands/./new.html">new</a></td><td>Create a new ADR</td></tr>
<tr><td><a href="commands/./edit.html">edit</a></td><td>Edit an existing ADR</td></tr>
<tr><td><a href="commands/./link.html">link</a></td><td>Link two ADRs together</td></tr>
<tr><td><a href="commands/./list.html">list</a></td><td>List all ADRs</td></tr>
<tr><td><a href="commands/./config.html">config</a></td><td>Show configuration</td></tr>
<tr><td><a href="commands/./doctor.html">doctor</a></td><td>Check repository health</td></tr>
<tr><td><a href="commands/./generate.html">generate</a></td><td>Generate documentation</td></tr>
</tbody></table>
</div>
<h2 id="global-options"><a class="header" href="#global-options">Global Options</a></h2>
<p>These options are available for all commands:</p>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode (YAML frontmatter)</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Run as if started in <code>&lt;DIR&gt;</code></td></tr>
<tr><td><code>-h, --help</code></td><td>Print help information</td></tr>
<tr><td><code>-V, --version</code></td><td>Print version information</td></tr>
</tbody></table>
</div>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<pre><code>adrs [OPTIONS] &lt;COMMAND&gt;

Commands:
  init      Initialize a new ADR repository
  new       Create a new ADR
  edit      Edit an existing ADR
  list      List all ADRs
  link      Link two ADRs together
  config    Show configuration
  doctor    Check repository health
  generate  Generate documentation
  help      Print this message or the help of the given subcommand(s)

Options:
      --ng                 Use next-gen mode (YAML frontmatter, enhanced features)
  -C, --cwd &lt;WORKING_DIR&gt;  Working directory (defaults to current directory)
  -h, --help               Print help
  -V, --version            Print version
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="init"><a class="header" href="#init">init</a></h1>
<p>Initialize a new ADR repository.</p>
<h2 id="usage-1"><a class="header" href="#usage-1">Usage</a></h2>
<pre><code>adrs init [OPTIONS] [DIRECTORY]
</code></pre>
<h2 id="arguments"><a class="header" href="#arguments">Arguments</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Description</th></tr></thead><tbody>
<tr><td><code>[DIRECTORY]</code></td><td>ADR directory path (default: <code>doc/adr</code>)</td></tr>
</tbody></table>
</div>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode (YAML frontmatter)</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>The <code>init</code> command creates:</p>
<ol>
<li>A <code>.adr-dir</code> file in the current directory containing the ADR directory path</li>
<li>The ADR directory (creates parent directories if needed)</li>
<li>An initial ADR: <code>0001-record-architecture-decisions.md</code></li>
</ol>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="basic-initialization"><a class="header" href="#basic-initialization">Basic Initialization</a></h3>
<pre><code class="language-sh">adrs init
</code></pre>
<p>Creates:</p>
<pre><code>.adr-dir          # Contains "doc/adr"
doc/
  adr/
    0001-record-architecture-decisions.md
</code></pre>
<h3 id="custom-directory"><a class="header" href="#custom-directory">Custom Directory</a></h3>
<pre><code class="language-sh">adrs init decisions
</code></pre>
<p>Creates:</p>
<pre><code>.adr-dir          # Contains "decisions"
decisions/
  0001-record-architecture-decisions.md
</code></pre>
<h3 id="nested-directory"><a class="header" href="#nested-directory">Nested Directory</a></h3>
<pre><code class="language-sh">adrs init docs/architecture/decisions
</code></pre>
<p>Creates the full directory path.</p>
<h3 id="nextgen-mode-1"><a class="header" href="#nextgen-mode-1">NextGen Mode</a></h3>
<pre><code class="language-sh">adrs init --ng
</code></pre>
<p>Creates the initial ADR with YAML frontmatter:</p>
<pre><code class="language-markdown">---
status: accepted
date: 2024-01-15
---

# Record Architecture Decisions

...
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<p>If the repository is already initialized (<code>.adr-dir</code> exists), the command will fail:</p>
<pre><code>Error: ADR repository already initialized
</code></pre>
<p>To reinitialize, remove the <code>.adr-dir</code> file first.</p>
<h2 id="related"><a class="header" href="#related">Related</a></h2>
<ul>
<li><a href="commands/./config.html">config</a> - Show current configuration</li>
<li><a href="commands/./new.html">new</a> - Create additional ADRs</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="new"><a class="header" href="#new">new</a></h1>
<p>Create a new Architecture Decision Record.</p>
<h2 id="usage-2"><a class="header" href="#usage-2">Usage</a></h2>
<pre><code>adrs new [OPTIONS] &lt;TITLE&gt;
</code></pre>
<h2 id="arguments-1"><a class="header" href="#arguments-1">Arguments</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;TITLE&gt;</code></td><td>Title of the new ADR</td></tr>
</tbody></table>
</div>
<h2 id="options-1"><a class="header" href="#options-1">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-f, --format &lt;FORMAT&gt;</code></td><td>Template format: <code>nygard</code> or <code>madr</code> (default: <code>nygard</code>)</td></tr>
<tr><td><code>-v, --variant &lt;VARIANT&gt;</code></td><td>Template variant: <code>full</code>, <code>minimal</code>, or <code>bare</code> (default: <code>full</code>)</td></tr>
<tr><td><code>--status &lt;STATUS&gt;</code></td><td>Initial status (default: <code>Proposed</code>)</td></tr>
<tr><td><code>-s, --supersedes &lt;N&gt;</code></td><td>ADR number(s) this supersedes</td></tr>
<tr><td><code>-l, --link &lt;LINK&gt;</code></td><td>Link to another ADR</td></tr>
<tr><td><code>--ng</code></td><td>Use NextGen mode (YAML frontmatter)</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-1"><a class="header" href="#description-1">Description</a></h2>
<p>Creates a new ADR file with the next available number. Opens your <code>$EDITOR</code> to edit the document. The ADR is saved when you close the editor.</p>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<pre><code class="language-sh">adrs new "Use PostgreSQL for persistence"
</code></pre>
<p>Creates <code>0002-use-postgresql-for-persistence.md</code> and opens it in your editor.</p>
<h3 id="with-madr-format"><a class="header" href="#with-madr-format">With MADR Format</a></h3>
<pre><code class="language-sh">adrs new --format madr "Use PostgreSQL for persistence"
</code></pre>
<h3 id="minimal-template"><a class="header" href="#minimal-template">Minimal Template</a></h3>
<pre><code class="language-sh">adrs new --variant minimal "Use PostgreSQL for persistence"
</code></pre>
<h3 id="with-initial-status"><a class="header" href="#with-initial-status">With Initial Status</a></h3>
<pre><code class="language-sh">adrs new --status Accepted "Use PostgreSQL for persistence"
</code></pre>
<h3 id="superseding-an-adr"><a class="header" href="#superseding-an-adr">Superseding an ADR</a></h3>
<pre><code class="language-sh">adrs new --supersedes 2 "Use MySQL instead of PostgreSQL"
</code></pre>
<p>This creates a new ADR and:</p>
<ul>
<li>Adds a "Supersedes" link in the new ADR</li>
<li>Adds a "Superseded by" link in ADR #2</li>
<li>Changes ADR #2's status to "Superseded"</li>
</ul>
<h3 id="superseding-multiple-adrs"><a class="header" href="#superseding-multiple-adrs">Superseding Multiple ADRs</a></h3>
<pre><code class="language-sh">adrs new --supersedes 2 --supersedes 3 "Consolidated database decision"
</code></pre>
<h3 id="linking-to-another-adr"><a class="header" href="#linking-to-another-adr">Linking to Another ADR</a></h3>
<pre><code class="language-sh">adrs new --link "2:Amends:Amended by" "Clarify database choice"
</code></pre>
<p>The link format is <code>TARGET:KIND:REVERSE_KIND</code>:</p>
<ul>
<li><code>TARGET</code>: The ADR number to link to</li>
<li><code>KIND</code>: The relationship from this ADR to the target</li>
<li><code>REVERSE_KIND</code>: The reverse relationship added to the target</li>
</ul>
<p>Common link types:</p>
<ul>
<li><code>Amends</code> / <code>Amended by</code></li>
<li><code>Extends</code> / <code>Extended by</code></li>
<li><code>Relates to</code> / <code>Relates to</code></li>
</ul>
<h3 id="multiple-links"><a class="header" href="#multiple-links">Multiple Links</a></h3>
<pre><code class="language-sh">adrs new --link "2:Amends:Amended by" --link "3:Extends:Extended by" "Combined decision"
</code></pre>
<h3 id="nextgen-mode-with-madr"><a class="header" href="#nextgen-mode-with-madr">NextGen Mode with MADR</a></h3>
<pre><code class="language-sh">adrs new --ng --format madr "Use PostgreSQL for persistence"
</code></pre>
<p>Creates an ADR with YAML frontmatter:</p>
<pre><code class="language-markdown">---
status: proposed
date: 2024-01-15
---

# Use PostgreSQL for Persistence

## Context and Problem Statement
...
</code></pre>
<h2 id="editor"><a class="header" href="#editor">Editor</a></h2>
<p>The <code>new</code> command uses the <code>$EDITOR</code> environment variable. If not set, it tries common editors:</p>
<ul>
<li><code>vim</code></li>
<li><code>nano</code></li>
<li><code>vi</code></li>
</ul>
<p>Set your preferred editor:</p>
<pre><code class="language-sh">export EDITOR="code --wait"  # VS Code
export EDITOR="nano"         # Nano
export EDITOR="vim"          # Vim
</code></pre>
<h2 id="file-naming"><a class="header" href="#file-naming">File Naming</a></h2>
<p>ADR files are named using the pattern:</p>
<pre><code>NNNN-title-in-kebab-case.md
</code></pre>
<p>Where:</p>
<ul>
<li><code>NNNN</code> is the zero-padded ADR number</li>
<li>Title is converted to lowercase kebab-case</li>
<li>Special characters are removed</li>
</ul>
<p>Examples:</p>
<ul>
<li><code>0001-record-architecture-decisions.md</code></li>
<li><code>0002-use-postgresql-for-persistence.md</code></li>
<li><code>0015-api-versioning-strategy.md</code></li>
</ul>
<h2 id="related-1"><a class="header" href="#related-1">Related</a></h2>
<ul>
<li><a href="commands/./edit.html">edit</a> - Edit an existing ADR</li>
<li><a href="commands/./link.html">link</a> - Link ADRs together</li>
<li><a href="commands/../templates.html">Templates</a> - Available templates</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="edit"><a class="header" href="#edit">edit</a></h1>
<p>Edit an existing Architecture Decision Record.</p>
<h2 id="usage-3"><a class="header" href="#usage-3">Usage</a></h2>
<pre><code>adrs edit [OPTIONS] &lt;ADR&gt;
</code></pre>
<h2 id="arguments-2"><a class="header" href="#arguments-2">Arguments</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;ADR&gt;</code></td><td>ADR to edit (number or search term)</td></tr>
</tbody></table>
</div>
<h2 id="options-2"><a class="header" href="#options-2">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-2"><a class="header" href="#description-2">Description</a></h2>
<p>Opens an existing ADR in your editor. The ADR can be specified by:</p>
<ul>
<li>Number (e.g., <code>1</code>, <code>12</code>)</li>
<li>Partial title match (fuzzy search)</li>
</ul>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<h3 id="by-number"><a class="header" href="#by-number">By Number</a></h3>
<pre><code class="language-sh">adrs edit 1
</code></pre>
<p>Opens <code>0001-record-architecture-decisions.md</code> in your editor.</p>
<h3 id="by-title"><a class="header" href="#by-title">By Title</a></h3>
<pre><code class="language-sh">adrs edit postgresql
</code></pre>
<p>Finds and opens the ADR with "postgresql" in its title.</p>
<h3 id="fuzzy-matching"><a class="header" href="#fuzzy-matching">Fuzzy Matching</a></h3>
<pre><code class="language-sh">adrs edit "database"
</code></pre>
<p>Opens the best matching ADR containing "database".</p>
<h2 id="editor-1"><a class="header" href="#editor-1">Editor</a></h2>
<p>Uses the <code>$EDITOR</code> environment variable. See <a href="commands/./new.html#editor">new</a> for configuration.</p>
<h2 id="related-2"><a class="header" href="#related-2">Related</a></h2>
<ul>
<li><a href="commands/./new.html">new</a> - Create a new ADR</li>
<li><a href="commands/./list.html">list</a> - List ADRs to find the one to edit</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="link"><a class="header" href="#link">link</a></h1>
<p>Link two Architecture Decision Records together.</p>
<h2 id="usage-4"><a class="header" href="#usage-4">Usage</a></h2>
<pre><code>adrs link [OPTIONS] &lt;SOURCE&gt; &lt;LINK&gt; &lt;TARGET&gt; &lt;REVERSE_LINK&gt;
</code></pre>
<h2 id="arguments-3"><a class="header" href="#arguments-3">Arguments</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;SOURCE&gt;</code></td><td>Source ADR number</td></tr>
<tr><td><code>&lt;LINK&gt;</code></td><td>Link description from source to target</td></tr>
<tr><td><code>&lt;TARGET&gt;</code></td><td>Target ADR number</td></tr>
<tr><td><code>&lt;REVERSE_LINK&gt;</code></td><td>Reverse link description from target to source</td></tr>
</tbody></table>
</div>
<h2 id="options-3"><a class="header" href="#options-3">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-3"><a class="header" href="#description-3">Description</a></h2>
<p>Creates bidirectional links between two ADRs. The link is added to the status section of both ADRs.</p>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<h3 id="amends-relationship"><a class="header" href="#amends-relationship">Amends Relationship</a></h3>
<pre><code class="language-sh">adrs link 3 "Amends" 1 "Amended by"
</code></pre>
<p>Result in ADR #3:</p>
<pre><code class="language-markdown">## Status

Proposed

Amends [1. Record architecture decisions](0001-record-architecture-decisions.md)
</code></pre>
<p>Result in ADR #1:</p>
<pre><code class="language-markdown">## Status

Accepted

Amended by [3. Clarify decision format](0003-clarify-decision-format.md)
</code></pre>
<h3 id="extends-relationship"><a class="header" href="#extends-relationship">Extends Relationship</a></h3>
<pre><code class="language-sh">adrs link 4 "Extends" 2 "Extended by"
</code></pre>
<h3 id="custom-relationship"><a class="header" href="#custom-relationship">Custom Relationship</a></h3>
<pre><code class="language-sh">adrs link 5 "Depends on" 3 "Dependency of"
</code></pre>
<h2 id="common-link-types"><a class="header" href="#common-link-types">Common Link Types</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Forward Link</th><th>Reverse Link</th><th>Use Case</th></tr></thead><tbody>
<tr><td>Amends</td><td>Amended by</td><td>Modifying a previous decision</td></tr>
<tr><td>Extends</td><td>Extended by</td><td>Building on a previous decision</td></tr>
<tr><td>Supersedes</td><td>Superseded by</td><td>Replacing a decision</td></tr>
<tr><td>Relates to</td><td>Relates to</td><td>General relationship</td></tr>
<tr><td>Depends on</td><td>Dependency of</td><td>Dependencies</td></tr>
</tbody></table>
</div>
<h2 id="superseding"><a class="header" href="#superseding">Superseding</a></h2>
<p>For superseding relationships, prefer using <code>adrs new --supersedes</code>:</p>
<pre><code class="language-sh"># Instead of:
adrs new "New approach"
adrs link 3 "Supersedes" 2 "Superseded by"

# Use:
adrs new --supersedes 2 "New approach"
</code></pre>
<p>The <code>--supersedes</code> option also updates the target ADR's status to "Superseded".</p>
<h2 id="nextgen-mode-2"><a class="header" href="#nextgen-mode-2">NextGen Mode</a></h2>
<p>In NextGen mode (<code>--ng</code>), links are stored in YAML frontmatter:</p>
<pre><code class="language-yaml">---
status: proposed
date: 2024-01-15
links:
  - kind: Amends
    target: 1
---
</code></pre>
<h2 id="related-3"><a class="header" href="#related-3">Related</a></h2>
<ul>
<li><a href="commands/./new.html">new</a> - Create ADRs with links</li>
<li><a href="commands/./list.html">list</a> - Find ADR numbers</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="list"><a class="header" href="#list">list</a></h1>
<p>List all Architecture Decision Records.</p>
<h2 id="usage-5"><a class="header" href="#usage-5">Usage</a></h2>
<pre><code>adrs list [OPTIONS]
</code></pre>
<h2 id="options-4"><a class="header" href="#options-4">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-4"><a class="header" href="#description-4">Description</a></h2>
<p>Lists all ADRs in the repository, showing their number, title, and status.</p>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<h3 id="basic-usage-1"><a class="header" href="#basic-usage-1">Basic Usage</a></h3>
<pre><code class="language-sh">adrs list
</code></pre>
<p>Output:</p>
<pre><code>1. Record architecture decisions [Accepted]
2. Use PostgreSQL for persistence [Proposed]
3. API versioning strategy [Accepted]
4. Use Redis for caching [Superseded]
</code></pre>
<h3 id="from-a-subdirectory"><a class="header" href="#from-a-subdirectory">From a Subdirectory</a></h3>
<pre><code class="language-sh">cd src/
adrs list
</code></pre>
<p><code>adrs</code> automatically finds the project root.</p>
<h3 id="specify-working-directory"><a class="header" href="#specify-working-directory">Specify Working Directory</a></h3>
<pre><code class="language-sh">adrs list -C /path/to/project
</code></pre>
<h2 id="output-format"><a class="header" href="#output-format">Output Format</a></h2>
<p>Each line shows:</p>
<ul>
<li>ADR number</li>
<li>Title</li>
<li>Status in brackets</li>
</ul>
<p>ADRs are sorted by number.</p>
<h2 id="related-4"><a class="header" href="#related-4">Related</a></h2>
<ul>
<li><a href="commands/./new.html">new</a> - Create a new ADR</li>
<li><a href="commands/./edit.html">edit</a> - Edit an ADR from the list</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="config"><a class="header" href="#config">config</a></h1>
<p>Show the current configuration.</p>
<h2 id="usage-6"><a class="header" href="#usage-6">Usage</a></h2>
<pre><code>adrs config [OPTIONS]
</code></pre>
<h2 id="options-5"><a class="header" href="#options-5">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-5"><a class="header" href="#description-5">Description</a></h2>
<p>Displays the current configuration, including where it was loaded from.</p>
<h2 id="examples-5"><a class="header" href="#examples-5">Examples</a></h2>
<h3 id="basic-usage-2"><a class="header" href="#basic-usage-2">Basic Usage</a></h3>
<pre><code class="language-sh">adrs config
</code></pre>
<p>Output:</p>
<pre><code>Project root: /home/user/myproject
Config source: adrs.toml
ADR directory: doc/adr
Full path: /home/user/myproject/doc/adr
Mode: Compatible
</code></pre>
<h3 id="without-initialization"><a class="header" href="#without-initialization">Without Initialization</a></h3>
<pre><code class="language-sh">adrs config
</code></pre>
<p>Output when no ADR repository is found:</p>
<pre><code>Project root: /home/user/myproject
Config source: defaults
ADR directory: doc/adr
Full path: /home/user/myproject/doc/adr
Mode: Compatible
</code></pre>
<h2 id="config-sources"><a class="header" href="#config-sources">Config Sources</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Source</th><th>Description</th></tr></thead><tbody>
<tr><td><code>adrs.toml</code></td><td>TOML configuration file</td></tr>
<tr><td><code>.adr-dir</code></td><td>Legacy adr-tools configuration</td></tr>
<tr><td><code>global (~/.config/adrs/config.toml)</code></td><td>User-wide configuration</td></tr>
<tr><td><code>environment</code></td><td>Environment variable override</td></tr>
<tr><td><code>defaults</code></td><td>Built-in defaults</td></tr>
</tbody></table>
</div>
<h2 id="related-5"><a class="header" href="#related-5">Related</a></h2>
<ul>
<li><a href="commands/../configuration.html">Configuration</a> - Configuration options</li>
<li><a href="commands/./init.html">init</a> - Initialize a repository</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="doctor"><a class="header" href="#doctor">doctor</a></h1>
<p>Check the health of your ADR repository.</p>
<h2 id="usage-7"><a class="header" href="#usage-7">Usage</a></h2>
<pre><code>adrs doctor [OPTIONS]
</code></pre>
<h2 id="options-6"><a class="header" href="#options-6">Options</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h2 id="description-6"><a class="header" href="#description-6">Description</a></h2>
<p>Runs diagnostic checks on your ADR repository and reports any issues found.</p>
<h2 id="checks-performed"><a class="header" href="#checks-performed">Checks Performed</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Check</th><th>Description</th></tr></thead><tbody>
<tr><td>File Naming</td><td>ADR files follow the <code>NNNN-title.md</code> pattern</td></tr>
<tr><td>Duplicate Numbers</td><td>No two ADRs have the same number</td></tr>
<tr><td>Numbering Gaps</td><td>Sequential numbering without gaps</td></tr>
<tr><td>Broken Links</td><td>All referenced ADRs exist</td></tr>
<tr><td>Superseded Status</td><td>Superseded ADRs have corresponding links</td></tr>
<tr><td>Parse Errors</td><td>All ADRs can be parsed correctly</td></tr>
</tbody></table>
</div>
<h2 id="examples-6"><a class="header" href="#examples-6">Examples</a></h2>
<h3 id="healthy-repository"><a class="header" href="#healthy-repository">Healthy Repository</a></h3>
<pre><code class="language-sh">adrs doctor
</code></pre>
<p>Output:</p>
<pre><code>Checking ADR repository health...

[OK] File naming: All 5 ADRs follow naming convention
[OK] Duplicate numbers: No duplicates found
[OK] Numbering gaps: Numbers are sequential
[OK] Broken links: All links are valid
[OK] Superseded status: All superseded ADRs have links
[OK] Parse errors: All ADRs parsed successfully

Health check passed!
</code></pre>
<h3 id="repository-with-issues"><a class="header" href="#repository-with-issues">Repository with Issues</a></h3>
<pre><code class="language-sh">adrs doctor
</code></pre>
<p>Output:</p>
<pre><code>Checking ADR repository health...

[OK] File naming: All 5 ADRs follow naming convention
[WARN] Numbering gaps: Gap after ADR 3 (next is 5)
[ERROR] Broken links: ADR 4 links to non-existent ADR 99
[WARN] Superseded status: ADR 2 is superseded but has no "Superseded by" link

Health check found 3 issue(s)
</code></pre>
<h2 id="severity-levels"><a class="header" href="#severity-levels">Severity Levels</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Level</th><th>Description</th></tr></thead><tbody>
<tr><td>OK</td><td>Check passed</td></tr>
<tr><td>WARN</td><td>Potential issue, but not critical</td></tr>
<tr><td>ERROR</td><td>Problem that should be fixed</td></tr>
</tbody></table>
</div>
<h2 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody>
<tr><td>0</td><td>All checks passed</td></tr>
<tr><td>1</td><td>One or more checks failed</td></tr>
</tbody></table>
</div>
<p>This allows using <code>doctor</code> in CI pipelines:</p>
<pre><code class="language-yaml">- name: Check ADR health
  run: adrs doctor
</code></pre>
<h2 id="related-6"><a class="header" href="#related-6">Related</a></h2>
<ul>
<li><a href="commands/./list.html">list</a> - List ADRs</li>
<li><a href="commands/./link.html">link</a> - Fix broken links</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generate"><a class="header" href="#generate">generate</a></h1>
<p>Generate documentation from ADRs.</p>
<h2 id="usage-8"><a class="header" href="#usage-8">Usage</a></h2>
<pre><code>adrs generate &lt;SUBCOMMAND&gt;
</code></pre>
<h2 id="subcommands"><a class="header" href="#subcommands">Subcommands</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Subcommand</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toc</code></td><td>Generate a table of contents</td></tr>
<tr><td><code>graph</code></td><td>Generate a Graphviz dependency graph</td></tr>
<tr><td><code>book</code></td><td>Generate an mdbook</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="generate-toc"><a class="header" href="#generate-toc">generate toc</a></h2>
<p>Generate a markdown table of contents to stdout.</p>
<h3 id="usage-9"><a class="header" href="#usage-9">Usage</a></h3>
<pre><code>adrs generate toc [OPTIONS]
</code></pre>
<h3 id="options-7"><a class="header" href="#options-7">Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-o, --ordered</code></td><td>Use ordered list (1. 2. 3.) instead of bullets</td></tr>
<tr><td><code>-i, --intro &lt;FILE&gt;</code></td><td>Prepend content from file</td></tr>
<tr><td><code>-O, --outro &lt;FILE&gt;</code></td><td>Append content from file</td></tr>
<tr><td><code>-p, --prefix &lt;PREFIX&gt;</code></td><td>Prefix for ADR links</td></tr>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<h4 id="basic-table-of-contents"><a class="header" href="#basic-table-of-contents">Basic Table of Contents</a></h4>
<pre><code class="language-sh">adrs generate toc
</code></pre>
<p>Output:</p>
<pre><code class="language-markdown">* [1. Record architecture decisions](0001-record-architecture-decisions.md)
* [2. Use PostgreSQL for persistence](0002-use-postgresql-for-persistence.md)
* [3. API versioning strategy](0003-api-versioning-strategy.md)
</code></pre>
<h4 id="ordered-list"><a class="header" href="#ordered-list">Ordered List</a></h4>
<pre><code class="language-sh">adrs generate toc --ordered
</code></pre>
<p>Output:</p>
<pre><code class="language-markdown">1. [1. Record architecture decisions](0001-record-architecture-decisions.md)
2. [2. Use PostgreSQL for persistence](0002-use-postgresql-for-persistence.md)
3. [3. API versioning strategy](0003-api-versioning-strategy.md)
</code></pre>
<h4 id="save-to-file"><a class="header" href="#save-to-file">Save to File</a></h4>
<pre><code class="language-sh">adrs generate toc &gt; doc/adr/README.md
</code></pre>
<h4 id="with-intro-and-outro-files"><a class="header" href="#with-intro-and-outro-files">With Intro and Outro Files</a></h4>
<pre><code class="language-sh">adrs generate toc -i intro.md -O outro.md &gt; doc/adr/README.md
</code></pre>
<h4 id="link-prefix-for-wikis"><a class="header" href="#link-prefix-for-wikis">Link Prefix for Wikis</a></h4>
<pre><code class="language-sh">adrs generate toc -p "wiki/adr/"
</code></pre>
<hr />
<h2 id="generate-graph"><a class="header" href="#generate-graph">generate graph</a></h2>
<p>Generate a Graphviz DOT graph showing ADR relationships.</p>
<h3 id="usage-10"><a class="header" href="#usage-10">Usage</a></h3>
<pre><code>adrs generate graph [OPTIONS]
</code></pre>
<h3 id="options-8"><a class="header" href="#options-8">Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-p, --prefix &lt;PREFIX&gt;</code></td><td>Prefix for node URLs</td></tr>
<tr><td><code>-e, --extension &lt;EXT&gt;</code></td><td>File extension for links (default: md)</td></tr>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<h4 id="basic-graph"><a class="header" href="#basic-graph">Basic Graph</a></h4>
<pre><code class="language-sh">adrs generate graph
</code></pre>
<p>Output:</p>
<pre><code class="language-dot">digraph {
  node [shape=plaintext];
  _1 [label="1. Record architecture decisions"; URL="0001-record-architecture-decisions.md"];
  _2 [label="2. Use PostgreSQL"; URL="0002-use-postgresql.md"];
  _3 [label="3. Use MySQL instead"; URL="0003-use-mysql-instead.md"];
  edge [style=dotted, weight=10];
  _1 -&gt; _2;
  _2 -&gt; _3;
  edge [style=solid, weight=1];
  _3 -&gt; _2 [label="Supersedes"];
}
</code></pre>
<h4 id="save-to-file-1"><a class="header" href="#save-to-file-1">Save to File</a></h4>
<pre><code class="language-sh">adrs generate graph &gt; doc/adr/graph.dot
</code></pre>
<h4 id="render-as-png"><a class="header" href="#render-as-png">Render as PNG</a></h4>
<p>Using Graphviz:</p>
<pre><code class="language-sh">adrs generate graph | dot -Tpng -o doc/adr/graph.png
</code></pre>
<h4 id="render-as-svg"><a class="header" href="#render-as-svg">Render as SVG</a></h4>
<pre><code class="language-sh">adrs generate graph | dot -Tsvg -o doc/adr/graph.svg
</code></pre>
<h4 id="html-links-with-custom-extension"><a class="header" href="#html-links-with-custom-extension">HTML Links with Custom Extension</a></h4>
<pre><code class="language-sh">adrs generate graph -e html -p "/docs/adr/"
</code></pre>
<h3 id="graph-features"><a class="header" href="#graph-features">Graph Features</a></h3>
<ul>
<li>Each ADR is a node with its number and title</li>
<li>Sequential ADRs are connected with dotted lines</li>
<li>Explicit links between ADRs shown as solid edges with labels</li>
<li>Nodes link to their ADR files (clickable in SVG)</li>
</ul>
<hr />
<h2 id="generate-book"><a class="header" href="#generate-book">generate book</a></h2>
<p>Generate an mdbook from your ADRs.</p>
<h3 id="usage-11"><a class="header" href="#usage-11">Usage</a></h3>
<pre><code>adrs generate book [OPTIONS]
</code></pre>
<h3 id="options-9"><a class="header" href="#options-9">Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody>
<tr><td><code>-o, --output &lt;DIR&gt;</code></td><td>Output directory (default: book)</td></tr>
<tr><td><code>-t, --title &lt;TITLE&gt;</code></td><td>Book title</td></tr>
<tr><td><code>-d, --description &lt;DESC&gt;</code></td><td>Book description</td></tr>
<tr><td><code>--ng</code></td><td>Use NextGen mode</td></tr>
<tr><td><code>-C, --cwd &lt;DIR&gt;</code></td><td>Working directory</td></tr>
<tr><td><code>-h, --help</code></td><td>Print help</td></tr>
</tbody></table>
</div>
<h3 id="examples-9"><a class="header" href="#examples-9">Examples</a></h3>
<h4 id="basic-book"><a class="header" href="#basic-book">Basic Book</a></h4>
<pre><code class="language-sh">adrs generate book
</code></pre>
<p>This creates a <code>book/</code> directory with:</p>
<ul>
<li><code>book.toml</code> - mdbook configuration</li>
<li><code>src/SUMMARY.md</code> - table of contents</li>
<li><code>src/*.md</code> - copies of all ADR files</li>
</ul>
<h4 id="custom-output-directory"><a class="header" href="#custom-output-directory">Custom Output Directory</a></h4>
<pre><code class="language-sh">adrs generate book -o docs/decisions
</code></pre>
<h4 id="custom-title-and-description"><a class="header" href="#custom-title-and-description">Custom Title and Description</a></h4>
<pre><code class="language-sh">adrs generate book -t "Project Architecture" -d "Key decisions for the project"
</code></pre>
<h4 id="build-and-serve"><a class="header" href="#build-and-serve">Build and Serve</a></h4>
<p>After generating:</p>
<pre><code class="language-sh">adrs generate book
cd book
mdbook serve
</code></pre>
<h3 id="integration-with-ci"><a class="header" href="#integration-with-ci">Integration with CI</a></h3>
<p>Generate and deploy the book automatically:</p>
<pre><code class="language-yaml">- name: Generate ADR book
  run: |
    adrs generate book
    cd book &amp;&amp; mdbook build

- name: Deploy to GitHub Pages
  uses: peaceiris/actions-gh-pages@v3
  with:
    github_token: ${{ secrets.GITHUB_TOKEN }}
    publish_dir: ./book/book
</code></pre>
<h2 id="related-7"><a class="header" href="#related-7">Related</a></h2>
<ul>
<li><a href="commands/./list.html">list</a> - List ADRs</li>
<li><a href="commands/./doctor.html">doctor</a> - Check repository health</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="library-usage"><a class="header" href="#library-usage">Library Usage</a></h1>
<p>The <code>adrs-core</code> crate provides a Rust library for working with ADRs programmatically.</p>
<h2 id="installation-2"><a class="header" href="#installation-2">Installation</a></h2>
<p>Add to your <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
adrs-core = "0.4"
</code></pre>
<h2 id="basic-usage-3"><a class="header" href="#basic-usage-3">Basic Usage</a></h2>
<h3 id="opening-a-repository"><a class="header" href="#opening-a-repository">Opening a Repository</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::Repository;
use std::path::Path;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    // Open existing repository
    let repo = Repository::open(Path::new("."))?;
    
    // Or create with defaults if it doesn't exist
    let repo = Repository::open_or_default(Path::new("."))?;
    
    Ok(())
}</code></pre></pre>
<h3 id="listing-adrs"><a class="header" href="#listing-adrs">Listing ADRs</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::Repository;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let repo = Repository::open(Path::new("."))?;
    
    for adr in repo.list()? {
        println!("{}: {} [{}]", adr.number, adr.title, adr.status);
    }
    
    Ok(())
}</code></pre></pre>
<h3 id="creating-an-adr"><a class="header" href="#creating-an-adr">Creating an ADR</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{Repository, Adr, AdrStatus};

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let repo = Repository::open(Path::new("."))?;
    
    let adr = Adr::new(
        repo.next_number()?,
        "Use PostgreSQL for persistence".to_string(),
    );
    
    let path = repo.create(&amp;adr)?;
    println!("Created: {}", path.display());
    
    Ok(())
}</code></pre></pre>
<h3 id="finding-an-adr"><a class="header" href="#finding-an-adr">Finding an ADR</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::Repository;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let repo = Repository::open(Path::new("."))?;
    
    // By number
    let adr = repo.get(1)?;
    
    // By search term (fuzzy)
    let adr = repo.find("postgresql")?;
    
    Ok(())
}</code></pre></pre>
<h3 id="linking-adrs"><a class="header" href="#linking-adrs">Linking ADRs</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{Repository, LinkKind};

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let repo = Repository::open(Path::new("."))?;
    
    repo.link(
        3,                          // source
        LinkKind::Amends,           // link type
        1,                          // target
        LinkKind::AmendedBy,        // reverse link type
    )?;
    
    Ok(())
}</code></pre></pre>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<h3 id="loading-configuration"><a class="header" href="#loading-configuration">Loading Configuration</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{Config, discover};
use std::path::Path;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    // Discover configuration from current directory
    let discovered = discover(Path::new("."))?;
    
    println!("Project root: {}", discovered.root.display());
    println!("ADR directory: {}", discovered.config.adr_dir.display());
    println!("Source: {:?}", discovered.source);
    
    Ok(())
}</code></pre></pre>
<h3 id="creating-configuration"><a class="header" href="#creating-configuration">Creating Configuration</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use adrs_core::Config;

let config = Config {
    adr_dir: "decisions".into(),
    mode: adrs_core::ConfigMode::NextGen,
    ..Default::default()
};
<span class="boring">}</span></code></pre></pre>
<h2 id="templates-1"><a class="header" href="#templates-1">Templates</a></h2>
<h3 id="using-built-in-templates-1"><a class="header" href="#using-built-in-templates-1">Using Built-in Templates</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{TemplateEngine, TemplateFormat, TemplateVariant, Adr};

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let engine = TemplateEngine::new(TemplateFormat::Madr, TemplateVariant::Minimal);
    
    let adr = Adr::new(1, "My Decision".to_string());
    let content = engine.render(&amp;adr)?;
    
    println!("{}", content);
    
    Ok(())
}</code></pre></pre>
<h3 id="custom-templates-1"><a class="header" href="#custom-templates-1">Custom Templates</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{TemplateEngine, Adr};
use std::path::Path;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let engine = TemplateEngine::from_file(Path::new("templates/custom.md"))?;
    
    let adr = Adr::new(1, "My Decision".to_string());
    let content = engine.render(&amp;adr)?;
    
    Ok(())
}</code></pre></pre>
<h2 id="parsing-adrs"><a class="header" href="#parsing-adrs">Parsing ADRs</a></h2>
<h3 id="parse-from-file"><a class="header" href="#parse-from-file">Parse from File</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::Parser;
use std::path::Path;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let parser = Parser::new();
    let adr = parser.parse_file(Path::new("doc/adr/0001-record-decisions.md"))?;
    
    println!("Title: {}", adr.title);
    println!("Status: {}", adr.status);
    println!("Date: {:?}", adr.date);
    
    for link in &amp;adr.links {
        println!("Link: {} -&gt; ADR {}", link.kind, link.target);
    }
    
    Ok(())
}</code></pre></pre>
<h3 id="parse-from-string"><a class="header" href="#parse-from-string">Parse from String</a></h3>
<pre><pre class="playground"><code class="language-rust">use adrs_core::Parser;

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let content = r#"
<span class="boring">1. Use PostgreSQL
</span>
Date: 2024-01-15

# Status

Accepted

# Context

We need a database.

# Decision

Use PostgreSQL.

# Consequences

None significant.
"#;

    let parser = Parser::new();
    let adr = parser.parse(content, Some(1))?;
    
    Ok(())
}</code></pre></pre>
<h2 id="health-checks"><a class="header" href="#health-checks">Health Checks</a></h2>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{Repository, doctor_check};

fn main() -&gt; anyhow::Result&lt;()&gt; {
    let repo = Repository::open(Path::new("."))?;
    let report = doctor_check(&amp;repo)?;
    
    for diagnostic in &amp;report.diagnostics {
        println!("[{:?}] {}: {}", 
            diagnostic.severity,
            diagnostic.check,
            diagnostic.message
        );
    }
    
    if report.has_errors() {
        std::process::exit(1);
    }
    
    Ok(())
}</code></pre></pre>
<h2 id="types"><a class="header" href="#types">Types</a></h2>
<h3 id="adrstatus"><a class="header" href="#adrstatus">AdrStatus</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use adrs_core::AdrStatus;

let status = AdrStatus::Accepted;
let status = AdrStatus::Superseded;
let status = AdrStatus::Custom("In Review".to_string());
<span class="boring">}</span></code></pre></pre>
<h3 id="linkkind"><a class="header" href="#linkkind">LinkKind</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use adrs_core::LinkKind;

let kind = LinkKind::Supersedes;
let kind = LinkKind::AmendedBy;
let kind = LinkKind::Custom("Depends on".to_string());
<span class="boring">}</span></code></pre></pre>
<h2 id="error-handling-1"><a class="header" href="#error-handling-1">Error Handling</a></h2>
<p>The library uses <code>thiserror</code> for error types:</p>
<pre><pre class="playground"><code class="language-rust">use adrs_core::{Repository, Error};

fn main() {
    match Repository::open(Path::new(".")) {
        Ok(repo) =&gt; { /* use repo */ }
        Err(Error::NotFound(path)) =&gt; {
            eprintln!("ADR repository not found at {}", path.display());
        }
        Err(e) =&gt; {
            eprintln!("Error: {}", e);
        }
    }
}</code></pre></pre>
<h2 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h2>
<p>The <code>adrs-core</code> crate has no optional features currently. All functionality is included by default.</p>
<h2 id="api-documentation"><a class="header" href="#api-documentation">API Documentation</a></h2>
<p>Full API documentation is available on <a href="https://docs.rs/adrs-core">docs.rs</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<h2 id="adr-background"><a class="header" href="#adr-background">ADR Background</a></h2>
<ul>
<li><a href="https://adr.github.io">Architectural Decision Records</a> - The official ADR homepage</li>
<li><a href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions">Documenting Architecture Decisions</a> - Michael Nygard's original blog post</li>
<li><a href="https://adr.github.io/madr/">MADR</a> - Markdown Architectural Decision Records</li>
</ul>
<h2 id="tools"><a class="header" href="#tools">Tools</a></h2>
<ul>
<li><a href="https://github.com/npryce/adr-tools">adr-tools</a> - The original bash-based ADR tool</li>
<li><a href="https://github.com/joshrotenberg/adrs">adrs</a> - This project (Rust rewrite)</li>
<li><a href="https://github.com/adr/adr-log">adr-log</a> - Generate an ADR log from MADR files</li>
<li><a href="https://github.com/opinionated-digital-center/pyadr">pyadr</a> - Python ADR tool</li>
</ul>
<h2 id="articles"><a class="header" href="#articles">Articles</a></h2>
<ul>
<li><a href="https://engineering.atspotify.com/2020/04/when-should-i-write-an-architecture-decision-record/">When Should I Write an Architecture Decision Record</a> - Spotify Engineering</li>
<li><a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/architectural-decision-records/adr-process.html">ADR Process</a> - AWS Prescriptive Guidance</li>
<li><a href="https://www.thoughtworks.com/radar/techniques/lightweight-architecture-decision-records">Architecture Decision Records</a> - ThoughtWorks Technology Radar</li>
</ul>
<h2 id="templates-2"><a class="header" href="#templates-2">Templates</a></h2>
<ul>
<li><a href="https://github.com/adr/madr/tree/main/template">MADR Templates</a> - Official MADR templates</li>
<li><a href="https://github.com/joelparkerhenderson/architecture-decision-record">ADR Templates</a> - Collection of ADR templates</li>
</ul>
<h2 id="books"><a class="header" href="#books">Books</a></h2>
<ul>
<li><a href="https://www.amazon.com/Documenting-Software-Architectures-Views-Beyond/dp/0321552687">Documenting Software Architectures</a> - Clements et al.</li>
<li><a href="https://pragprog.com/titles/mkdsa/design-it/">Design It!</a> - Michael Keeling</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<p>Contributions are welcome! See <a href="https://github.com/joshrotenberg/adrs/issues">issues</a> for ideas or open a new issue to discuss your proposal.</p>
<h2 id="development-setup"><a class="header" href="#development-setup">Development Setup</a></h2>
<pre><code class="language-sh">git clone https://github.com/joshrotenberg/adrs
cd adrs
cargo build
</code></pre>
<h2 id="running-tests"><a class="header" href="#running-tests">Running Tests</a></h2>
<pre><code class="language-sh"># Library tests
cargo test --lib --all-features

# Integration tests
cargo test --test '*' --all-features

# All tests
cargo test --all-features
</code></pre>
<h2 id="code-quality"><a class="header" href="#code-quality">Code Quality</a></h2>
<p>Before submitting a PR, ensure:</p>
<pre><code class="language-sh"># Format code
cargo fmt --all

# Run lints
cargo clippy --all-targets --all-features -- -D warnings

# Run tests
cargo test --all-features
</code></pre>
<h2 id="guidelines"><a class="header" href="#guidelines">Guidelines</a></h2>
<h3 id="compatibility"><a class="header" href="#compatibility">Compatibility</a></h3>
<p>The v2 rewrite maintains compatibility with <a href="https://github.com/npryce/adr-tools">adr-tools</a> repositories. Changes should not break existing ADR directories.</p>
<p>New features that extend beyond adr-tools compatibility should:</p>
<ul>
<li>Work in both Compatible and NextGen modes where possible</li>
<li>Be opt-in via flags or configuration</li>
<li>Be documented</li>
</ul>
<h3 id="code-style"><a class="header" href="#code-style">Code Style</a></h3>
<ul>
<li>Follow Rust 2024 edition idioms</li>
<li>Use <code>thiserror</code> for library errors</li>
<li>Use <code>anyhow</code> for CLI errors</li>
<li>Add doc comments to public APIs</li>
<li>Keep functions focused and testable</li>
</ul>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<ul>
<li>Add unit tests for new functionality</li>
<li>Add integration tests for CLI changes</li>
<li>Test both Compatible and NextGen modes</li>
<li>Test edge cases (empty files, special characters, etc.)</li>
</ul>
<h3 id="commits"><a class="header" href="#commits">Commits</a></h3>
<p>Use <a href="https://www.conventionalcommits.org/">conventional commits</a>:</p>
<pre><code class="language-text">feat: add new feature
fix: resolve bug
docs: update documentation
test: add tests
refactor: restructure code
chore: maintenance tasks
</code></pre>
<h3 id="pull-requests"><a class="header" href="#pull-requests">Pull Requests</a></h3>
<ol>
<li>Fork the repository</li>
<li>Create a feature branch: <code>git checkout -b feat/my-feature</code></li>
<li>Make your changes</li>
<li>Run tests and lints</li>
<li>Commit with conventional commit messages</li>
<li>Push and open a PR</li>
</ol>
<h2 id="project-structure"><a class="header" href="#project-structure">Project Structure</a></h2>
<pre><code class="language-text">adrs/
├── crates/
│   ├── adrs-core/     # Library crate
│   │   ├── src/
│   │   │   ├── config.rs    # Configuration handling
│   │   │   ├── parse.rs     # ADR parsing
│   │   │   ├── template.rs  # Template engine
│   │   │   ├── repository.rs # Repository operations
│   │   │   ├── doctor.rs    # Health checks
│   │   │   └── types.rs     # Core types
│   │   └── Cargo.toml
│   └── adrs/          # CLI crate
│       ├── src/
│       │   ├── main.rs
│       │   └── commands/    # CLI commands
│       └── Cargo.toml
├── book/              # mdbook documentation
└── Cargo.toml         # Workspace manifest
</code></pre>
<h2 id="documentation"><a class="header" href="#documentation">Documentation</a></h2>
<ul>
<li>Update the mdbook in <code>book/</code> for user-facing changes</li>
<li>Add doc comments to public APIs</li>
<li>Update CHANGELOG.md (handled by release-plz)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="license"><a class="header" href="#license">License</a></h1>
<p>See <a href="https://github.com/joshrotenberg/adrs/blob/main/LICENSE-MIT">LICENSE-MIT</a> or <a href="https://github.com/joshrotenberg/adrs/blob/main/LICENSE-APACHE-2.0">LICENSE-APACHE</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
